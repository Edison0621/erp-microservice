# ä¸šåŠ¡æœåŠ¡æ¨¡å—

<cite>
**æœ¬æ–‡å¼•ç”¨çš„æ–‡ä»¶**
- [README.md](file://README.md)
- [DEVELOPMENT_PLAN.md](file://DEVELOPMENT_PLAN.md)
- [src/ErpSystem.sln](file://src/ErpSystem.sln)
- [docs/PRD-01-MasterData-Service.md](file://docs/PRD-01-MasterData-Service.md)
- [docs/PRD-05-Inventory-Service.md](file://docs/PRD-05-Inventory-Service.md)
- [src/Services/Identity/ErpSystem.Identity/Program.cs](file://src/Services/Identity/ErpSystem.Identity/Program.cs)
- [src/Services/Finance/ErpSystem.Finance/Program.cs](file://src/Services/Finance/ErpSystem.Finance/Program.cs)
- [src/Services/Procurement/ErpSystem.Procurement/Program.cs](file://src/Services/Procurement/ErpSystem.Procurement/Program.cs)
- [src/Services/Sales/ErpSystem.Sales/Program.cs](file://src/Services/Sales/ErpSystem.Sales/Program.cs)
- [deploy/k8s/namespace.yaml](file://deploy/k8s/namespace.yaml)
</cite>

## ç›®å½•
1. [å¼•è¨€](#å¼•è¨€)
2. [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
3. [æ ¸å¿ƒç»„ä»¶](#æ ¸å¿ƒç»„ä»¶)
4. [æ¶æ„æ€»è§ˆ](#æ¶æ„æ€»è§ˆ)
5. [è¯¦ç»†ç»„ä»¶åˆ†æ](#è¯¦ç»†ç»„ä»¶åˆ†æ)
6. [ä¾èµ–åˆ†æ](#ä¾èµ–åˆ†æ)
7. [æ€§èƒ½è€ƒè™‘](#æ€§èƒ½è€ƒè™‘)
8. [æ•…éšœæ’é™¤æŒ‡å—](#æ•…éšœæ’é™¤æŒ‡å—)
9. [ç»“è®º](#ç»“è®º)
10. [é™„å½•](#é™„å½•)

## å¼•è¨€
æœ¬æ–‡ä»¶ä¸º15ä¸ªä¸šåŠ¡æœåŠ¡æ¨¡å—çš„ç»¼åˆæ–‡æ¡£ï¼Œè¦†ç›–èº«ä»½è®¤è¯ã€ä¸»æ•°æ®ç®¡ç†ã€è´¢åŠ¡ä¼šè®¡ã€ä¾›åº”é“¾ç®¡ç†ï¼ˆé‡‡è´­ã€åº“å­˜ã€é”€å”®ï¼‰ã€ç”Ÿäº§åˆ¶é€ ã€é¡¹ç›®ç®¡ç†ã€äººåŠ›èµ„æºã€è–ªé…¬ã€èµ„äº§ã€è´¨é‡ã€è‡ªåŠ¨åŒ–ã€ç»´æŠ¤ã€æŠ¥å‘Šã€åˆ†æä¸BIã€CRMç­‰æ¨¡å—ã€‚æ–‡æ¡£ä»åŠŸèƒ½èŒƒå›´ã€ä¸šåŠ¡ä»·å€¼ã€æŠ€æœ¯å®ç°ã€æœåŠ¡é—´ä¾èµ–ã€æ•°æ®æµä¸äº‹ä»¶ä¼ æ’­ã€APIæ¥å£ã€æ•°æ®æ¨¡å‹ã€é›†æˆæ¨¡å¼ã€ç‹¬ç«‹éƒ¨ç½²ä¸æ‰©å±•ç­–ç•¥ã€è¿ç»´è€ƒè™‘ç­‰æ–¹é¢è¿›è¡Œç³»ç»ŸåŒ–è¯´æ˜ï¼Œæ—¢é¢å‘ä¸šåŠ¡åˆ†æå¸ˆä¹Ÿé¢å‘å¼€å‘è€…ã€‚

## é¡¹ç›®ç»“æ„
- é‡‡ç”¨å¾®æœåŠ¡æ¶æ„ï¼Œå…±15ä¸ªä¸šåŠ¡æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡ç‹¬ç«‹å¼€å‘ã€ç‹¬ç«‹éƒ¨ç½²ã€ç‹¬ç«‹æ•°æ®åº“ã€‚
- æœåŠ¡è¾¹ç•Œæ¸…æ™°ï¼Œå›´ç»•æ ¸å¿ƒä¸šåŠ¡åŸŸåˆ’åˆ†ï¼šè´¢åŠ¡ä¼šè®¡ã€ä¾›åº”é“¾ã€ç”Ÿäº§åˆ¶é€ ã€é¡¹ç›®ç®¡ç†ã€äººåŠ›èµ„æºã€è–ªé…¬ã€èµ„äº§ã€è´¨é‡ã€è‡ªåŠ¨åŒ–ã€ç»´æŠ¤ã€æŠ¥å‘Šã€åˆ†æä¸BIã€CRMç­‰ã€‚
- é€šè¿‡Dapr Sidecarå®ç°æœåŠ¡é—´é€šä¿¡ï¼ˆåŒæ­¥è°ƒç”¨ä¸å¼‚æ­¥äº‹ä»¶æ€»çº¿ï¼‰ï¼Œç»“åˆäº‹ä»¶æº¯æºä¸CQRSæ¨¡å¼ï¼Œå®ç°é«˜å†…èšä½è€¦åˆã€‚
- å‰ç«¯é‡‡ç”¨Reactå•é¡µåº”ç”¨ï¼Œé€šè¿‡YARPç½‘å…³ç»Ÿä¸€å¯¹å¤–æš´éœ²APIã€‚

```mermaid
graph TB
subgraph "ç½‘å…³å±‚"
GW["YARP API ç½‘å…³"]
end
subgraph "æ ¸å¿ƒä¸šåŠ¡æœåŠ¡"
FIN["ğŸ’° Finance è´¢åŠ¡"]
INV["ğŸ“¦ Inventory åº“å­˜"]
SALES["ğŸ›’ Sales é”€å”®"]
PROC["ğŸ“‹ Procurement é‡‡è´­"]
PROD["ğŸ­ Production ç”Ÿäº§"]
CRM["ğŸ¤ CRM å®¢æˆ·å…³ç³»"]
PROJ["ğŸ“… Projects é¡¹ç›®"]
end
subgraph "æ”¯æ’‘æœåŠ¡"
HR["ğŸ‘¥ HR äººåŠ›èµ„æº"]
PAY["ğŸ’¸ Payroll è–ªé…¬"]
ASSET["ğŸ¢ Assets èµ„äº§"]
ID["ğŸ” Identity èº«ä»½è®¤è¯"]
MD["ğŸ“ MasterData ä¸»æ•°æ®"]
MRP["ğŸ“ˆ MRP ç‰©æ–™éœ€æ±‚è®¡åˆ’"]
RPT["ğŸ“Š Reporting æŠ¥å‘Š"]
end
subgraph "å¹³å°æœåŠ¡"
AUTO["ğŸ¤– Automation è‡ªåŠ¨åŒ–"]
QUAL["âœ… Quality è´¨é‡"]
MAINT["ğŸ”§ Maintenance ç»´æŠ¤"]
SET["âš™ï¸ Settings è®¾ç½®"]
ANA["ğŸ“‰ Analytics åˆ†æ"]
end
subgraph "åŸºç¡€è®¾æ–½"
PG["PostgreSQL"]
TSDB["TimescaleDB"]
REDIS["Redis"]
DAPR["Dapr Sidecar"]
end
GW --> FIN & INV & SALES & PROC & PROD & CRM & PROJ
GW --> HR & PAY & ASSET & ID & MD & MRP & RPT
GW -.->|SignalR/WebSocket| ANA
FIN & INV & SALES & CRM & PROJ -.->|äº‹ä»¶æ€»çº¿| DAPR
DAPR -.-> AUTO & ANA
FIN & INV & SALES --> PG
ANA --> TSDB
ID --> REDIS
```

å›¾ç¤ºæ¥æº
- [README.md](file://README.md#L130-L183)

ç« èŠ‚æ¥æº
- [README.md](file://README.md#L130-L183)
- [src/ErpSystem.sln](file://src/ErpSystem.sln#L1-L120)

## æ ¸å¿ƒç»„ä»¶
- èº«ä»½è®¤è¯æœåŠ¡ï¼ˆIdentityï¼‰ï¼šæä¾›ç”¨æˆ·ã€è§’è‰²ã€éƒ¨é—¨ã€æ•°æ®æƒé™èšåˆï¼Œé›†æˆJWTä¸åˆ·æ–°ä»¤ç‰Œï¼Œå‘å…¶ä»–æœåŠ¡å‘å¸ƒHRé›†æˆäº‹ä»¶ã€‚
- ä¸»æ•°æ®æœåŠ¡ï¼ˆMasterDataï¼‰ï¼šç»Ÿä¸€ç®¡ç†ç‰©æ–™ã€ä¾›åº”å•†ã€å®¢æˆ·ã€ä»“åº“ç­‰ä¸»æ•°æ®ï¼Œæ”¯æŒç‰ˆæœ¬ä¸å®¡è®¡ï¼Œå‘å¸ƒé¢†åŸŸäº‹ä»¶ä¾›å…¶ä»–æœåŠ¡è®¢é˜…ã€‚
- ä¾›åº”é“¾æœåŠ¡ï¼šé‡‡è´­ï¼ˆProcurementï¼‰ã€åº“å­˜ï¼ˆInventoryï¼‰ã€é”€å”®ï¼ˆSalesï¼‰ä¸‰è€…å½¢æˆé—­ç¯ï¼Œé€šè¿‡äº‹ä»¶é©±åŠ¨å®ç°è·¨æœåŠ¡åä½œã€‚
- è´¢åŠ¡ä¼šè®¡æœåŠ¡ï¼ˆFinanceï¼‰ï¼šåŒåˆ†å½•æ€»è´¦ã€ç§‘ç›®è¡¨ã€è¯•ç®—å¹³è¡¡ä¸è´¢åŠ¡æŠ¥è¡¨ï¼Œè‡ªåŠ¨ä»ä¸šåŠ¡äº‹ä»¶ç”Ÿæˆå‡­è¯ã€‚
- ç”Ÿäº§åˆ¶é€ æœåŠ¡ï¼ˆProductionï¼‰ï¼šç”Ÿäº§è®¢å•ã€BOMã€åœ¨åˆ¶å“è·Ÿè¸ªä¸æ•ˆç‡æŠ¥å‘Šã€‚
- é¡¹ç›®ç®¡ç†æœåŠ¡ï¼ˆProjectsï¼‰ï¼šé¡¹ç›®ã€ä»»åŠ¡ä¸å·¥æ—¶ç®¡ç†ã€‚
- äººåŠ›èµ„æºä¸è–ªé…¬ï¼ˆHR/Payrollï¼‰ã€èµ„äº§ï¼ˆAssetsï¼‰ã€è´¨é‡ï¼ˆQualityï¼‰ã€è‡ªåŠ¨åŒ–ï¼ˆAutomationï¼‰ã€ç»´æŠ¤ï¼ˆMaintenanceï¼‰ã€æŠ¥å‘Šï¼ˆReportingï¼‰ã€åˆ†æï¼ˆAnalyticsï¼‰ã€CRMç­‰æœåŠ¡ååŒæ”¯æ’‘ä¼ä¸šè¿è¥ã€‚

ç« èŠ‚æ¥æº
- [README.md](file://README.md#L37-L126)
- [src/ErpSystem.sln](file://src/ErpSystem.sln#L1-L120)

## æ¶æ„æ€»è§ˆ
- äº‹ä»¶é©±åŠ¨ï¼šå„æœåŠ¡é€šè¿‡äº‹ä»¶æ€»çº¿å‘å¸ƒ/è®¢é˜…é¢†åŸŸäº‹ä»¶ï¼Œå®ç°æ¾è€¦åˆåä½œã€‚
- äº‹ä»¶æº¯æºï¼šä½¿ç”¨äº‹ä»¶å­˜å‚¨è®°å½•èšåˆçŠ¶æ€å˜æ›´ï¼Œæ”¯æŒå®¡è®¡ä¸é‡æ”¾ã€‚
- CQRSï¼šè¯»å†™åˆ†ç¦»ï¼Œè¯»æ¨¡å‹é€šè¿‡æŠ•å½±ç”Ÿæˆï¼Œæå‡æŸ¥è¯¢æ€§èƒ½ã€‚
- Dapré›†æˆï¼šæœåŠ¡é—´é€šä¿¡ã€çŠ¶æ€ç®¡ç†ã€Pub/SubæŠ½è±¡ã€å¯è§‚æµ‹æ€§ã€‚
- å¤šç§Ÿæˆ·ï¼šé€šè¿‡æŸ¥è¯¢è¿‡æ»¤å™¨ä¸æ‹¦æˆªå™¨å®ç°ç§Ÿæˆ·éš”ç¦»ã€‚
- å®¹å™¨åŒ–ä¸Kubernetesï¼šæ”¯æŒç‹¬ç«‹éƒ¨ç½²ã€å¼¹æ€§æ‰©ç¼©å®¹ä¸æ»šåŠ¨æ›´æ–°ã€‚

```mermaid
graph TB
subgraph "äº‹ä»¶æ€»çº¿"
BUS["Dapr Pub/Sub"]
end
subgraph "äº‹ä»¶å­˜å‚¨"
ES_ID["Identity EventStore"]
ES_MD["MasterData EventStore"]
ES_PROC["Procurement EventStore"]
ES_INV["Inventory EventStore"]
ES_SALES["Sales EventStore"]
ES_FIN["Finance EventStore"]
end
ID["Identity"] --> BUS
MD["MasterData"] --> BUS
PROC["Procurement"] --> BUS
INV["Inventory"] --> BUS
SALES["Sales"] --> BUS
FIN["Finance"] --> BUS
ID --> ES_ID
MD --> ES_MD
PROC --> ES_PROC
INV --> ES_INV
SALES --> ES_SALES
FIN --> ES_FIN
```

å›¾ç¤ºæ¥æº
- [README.md](file://README.md#L185-L196)
- [src/Services/Identity/ErpSystem.Identity/Program.cs](file://src/Services/Identity/ErpSystem.Identity/Program.cs#L28-L44)
- [src/Services/Finance/ErpSystem.Finance/Program.cs](file://src/Services/Finance/ErpSystem.Finance/Program.cs#L27-L47)
- [src/Services/Procurement/ErpSystem.Procurement/Program.cs](file://src/Services/Procurement/ErpSystem.Procurement/Program.cs#L28-L43)
- [src/Services/Sales/ErpSystem.Sales/Program.cs](file://src/Services/Sales/ErpSystem.Sales/Program.cs#L28-L43)

## è¯¦ç»†ç»„ä»¶åˆ†æ

### èº«ä»½è®¤è¯æœåŠ¡ï¼ˆIdentityï¼‰
- åŠŸèƒ½èŒƒå›´
  - ç”¨æˆ·ã€è§’è‰²ã€éƒ¨é—¨ã€å²—ä½ã€æ•°æ®æƒé™èšåˆã€‚
  - JWTç­¾å‘ä¸åˆ·æ–°ä»¤ç‰Œã€‚
  - ä¸HRæœåŠ¡é›†æˆï¼ŒåŒæ­¥å‘˜å·¥ä¿¡æ¯ä¸ç»„ç»‡æ¶æ„ã€‚
- æŠ€æœ¯å®ç°
  - ä½¿ç”¨äº‹ä»¶å­˜å‚¨è®°å½•ç”¨æˆ·ä¸æƒé™å˜æ›´ã€‚
  - é€šè¿‡Dapräº‹ä»¶æ€»çº¿å‘å¸ƒHRé›†æˆäº‹ä»¶ã€‚
  - æä¾›Swaggeræ–‡æ¡£ä¸å¥åº·æ£€æŸ¥ç«¯ç‚¹ã€‚
- APIä¸é›†æˆ
  - ç”¨æˆ·ã€è§’è‰²ã€éƒ¨é—¨ã€å®¡è®¡ã€é›†æˆäº‹ä»¶ç­‰æ§åˆ¶å™¨ã€‚
  - ä¸HRæœåŠ¡é€šè¿‡äº‹ä»¶è¿›è¡ŒåŒå‘åŒæ­¥ã€‚
- éƒ¨ç½²ä¸æ‰©å±•
  - ç‹¬ç«‹å®¹å™¨é•œåƒï¼Œæ”¯æŒæ°´å¹³æ‰©å±•ã€‚
  - Redisç”¨äºç¼“å­˜ä¸ä¼šè¯çŠ¶æ€ï¼ˆDapr Stateï¼‰ã€‚

```mermaid
sequenceDiagram
participant HR as "HR æœåŠ¡"
participant ID as "Identity æœåŠ¡"
participant BUS as "Dapr äº‹ä»¶æ€»çº¿"
HR->>ID : "UserCreatedEvent / UserUpdatedEvent"
ID->>ID : "äº‹ä»¶æŒä¹…åŒ–ä¸æŠ•å½±"
ID->>BUS : "å‘å¸ƒ HR é›†æˆäº‹ä»¶"
BUS-->>ID : "ç¡®è®¤æŠ•é€’"
ID-->>HR : "è®¢é˜…å¹¶æ¶ˆè´¹äº‹ä»¶"
```

å›¾ç¤ºæ¥æº
- [src/Services/Identity/ErpSystem.Identity/Program.cs](file://src/Services/Identity/ErpSystem.Identity/Program.cs#L28-L44)

ç« èŠ‚æ¥æº
- [src/Services/Identity/ErpSystem.Identity/Program.cs](file://src/Services/Identity/ErpSystem.Identity/Program.cs#L1-L76)

### ä¸»æ•°æ®ç®¡ç†æœåŠ¡ï¼ˆMasterDataï¼‰
- åŠŸèƒ½èŒƒå›´
  - ç‰©æ–™ï¼šåŸºç¡€ä¿¡æ¯ã€æ ‡å‡†æˆæœ¬ã€å¯ç”¨/åœç”¨ã€æ‰©å±•å±æ€§ã€åˆ†ç±»ã€å¤šå•ä½ã€æ›¿ä»£å…³ç³»ã€BOMå…³è”ã€‚
  - ä¾›åº”å•†ï¼šåŸºç¡€ä¿¡æ¯ã€åˆ†ç±»åˆ†çº§ã€ç»©æ•ˆç®¡ç†ã€é»‘åå•ã€‚
  - å®¢æˆ·ï¼šåŸºç¡€ä¿¡æ¯ã€ä¿¡ç”¨é¢åº¦ã€åˆ†ç»„ä¸ç”Ÿå‘½å‘¨æœŸã€‚
  - ä»“åº“ä¸åº“ä½ï¼šä»“åº“æ¡£æ¡ˆä¸åº“ä½ç»“æ„ã€‚
- ä¸šåŠ¡ä»·å€¼
  - ç»Ÿä¸€ä¸»æ•°æ®ï¼Œä¿è¯è·¨æœåŠ¡ä¸€è‡´æ€§ã€‚
  - æ”¯æŒå®¡æ‰¹æµç¨‹ä¸å®¡è®¡è¿½è¸ªã€‚
- APIä¸æ•°æ®æ¨¡å‹
  - ç‰©æ–™ã€ä¾›åº”å•†ã€å®¢æˆ·ã€ä»“åº“ç®¡ç†APIã€‚
  - é¢†åŸŸäº‹ä»¶ï¼šç‰©æ–™åˆ›å»º/æ›´æ–°/æˆæœ¬å˜æ›´/å¯åœç”¨ï¼›ä¾›åº”å•†ç­‰çº§å˜æ›´/æ‹‰é»‘ï¼›å®¢æˆ·ä¿¡ç”¨/ç”Ÿå‘½å‘¨æœŸå˜æ›´ã€‚
- é›†æˆæ¨¡å¼
  - ä¸Financeï¼ˆæˆæœ¬ï¼‰ã€Procurementï¼ˆä¾›åº”å•†/ç‰©æ–™ï¼‰ã€Inventoryï¼ˆä»“åº“/åº“ä½ï¼‰ã€Salesï¼ˆå®¢æˆ·/ä»·æ ¼ï¼‰é›†æˆã€‚

```mermaid
flowchart TD
Start(["åˆ›å»ºç‰©æ–™"]) --> Fill["å¡«å†™åŸºç¡€ä¿¡æ¯<br/>è®¾ç½®æ‰©å±•å±æ€§"]
Fill --> Approve["æäº¤å®¡æ‰¹"]
Approve --> Cost["è´¢åŠ¡è®¾ç½®æ ‡å‡†æˆæœ¬"]
Cost --> Activate["å®¡æ‰¹é€šè¿‡åå¯ç”¨"]
Activate --> Publish["å‘å¸ƒé¢†åŸŸäº‹ä»¶"]
Publish --> Subscribers["Finance/Procurement/Inventory/Sales è®¢é˜…åŒæ­¥"]
Subscribers --> End(["å®Œæˆ"])
```

å›¾ç¤ºæ¥æº
- [docs/PRD-01-MasterData-Service.md](file://docs/PRD-01-MasterData-Service.md#L402-L415)

ç« èŠ‚æ¥æº
- [docs/PRD-01-MasterData-Service.md](file://docs/PRD-01-MasterData-Service.md#L1-L827)

### è´¢åŠ¡ä¼šè®¡æœåŠ¡ï¼ˆFinanceï¼‰
- åŠŸèƒ½èŒƒå›´
  - åŒåˆ†å½•æ€»è´¦ã€ç§‘ç›®è¡¨ï¼ˆå±‚æ¬¡åŒ–ï¼‰ã€è¯•ç®—å¹³è¡¡ä¸è´¢åŠ¡æŠ¥è¡¨ã€‚
  - åº”æ”¶åº”ä»˜ã€å‘ç¥¨ã€æˆæœ¬æ ¸ç®—ï¼ˆææ–™ã€äººå·¥ã€åˆ¶é€ è´¹ç”¨ï¼‰ã€‚
  - è‡ªåŠ¨å‡­è¯ç”Ÿæˆï¼ˆæ¥è‡ªé‡‡è´­ã€é”€å”®ã€ç”Ÿäº§ç­‰äº‹ä»¶ï¼‰ã€‚
- æŠ€æœ¯å®ç°
  - äº‹ä»¶å­˜å‚¨ä¸CQRSè¯»å†™åˆ†ç¦»ã€‚
  - Dapräº‹ä»¶æ€»çº¿ä¸MediatRç®¡é“ï¼ˆéªŒè¯ã€æ—¥å¿—ã€å¹‚ç­‰ã€å®¡è®¡ã€æ€§èƒ½ï¼‰ã€‚
- APIä¸æ•°æ®æ¨¡å‹
  - æ€»è´¦ã€ç§‘ç›®ã€è´¢åŠ¡æœŸé—´ã€å‡­è¯ã€å‘ç¥¨ã€ä»˜æ¬¾ç­‰æ§åˆ¶å™¨ä¸èšåˆã€‚
- é›†æˆæ¨¡å¼
  - è®¢é˜…é‡‡è´­æ”¶è´§ã€é”€å”®å‘è´§ã€ç”Ÿäº§å®Œå·¥ç­‰äº‹ä»¶ï¼Œç”Ÿæˆä¼šè®¡åˆ†å½•ã€‚

```mermaid
sequenceDiagram
participant INV as "Inventory æœåŠ¡"
participant FIN as "Finance æœåŠ¡"
participant BUS as "Dapr äº‹ä»¶æ€»çº¿"
INV->>BUS : "GoodsReceivedEvent"
BUS-->>FIN : "æŠ•é€’äº‹ä»¶"
FIN->>FIN : "ç”Ÿæˆä¼šè®¡åˆ†å½•"
FIN-->>INV : "ç¡®è®¤å¤„ç†"
```

å›¾ç¤ºæ¥æº
- [src/Services/Finance/ErpSystem.Finance/Program.cs](file://src/Services/Finance/ErpSystem.Finance/Program.cs#L27-L47)

ç« èŠ‚æ¥æº
- [src/Services/Finance/ErpSystem.Finance/Program.cs](file://src/Services/Finance/ErpSystem.Finance/Program.cs#L1-L89)

### ä¾›åº”é“¾ç®¡ç†ï¼ˆé‡‡è´­ã€åº“å­˜ã€é”€å”®ï¼‰
- é‡‡è´­ï¼ˆProcurementï¼‰
  - é‡‡è´­è®¢å•ç”Ÿå‘½å‘¨æœŸï¼šåˆ›å»ºã€å®¡æ‰¹ã€æ”¶è´§ã€å…¥åº“ã€ç»“ç®—ã€‚
  - ä¸ä¸»æ•°æ®ï¼ˆä¾›åº”å•†/ç‰©æ–™ï¼‰ã€è´¢åŠ¡ï¼ˆåº”ä»˜ï¼‰é›†æˆã€‚
- åº“å­˜ï¼ˆInventoryï¼‰
  - å®æ—¶åº“å­˜å°è´¦ã€å‡ºå…¥åº“æµæ°´ã€åº“å­˜é¢„ç•™ã€ç›˜ç‚¹ä¸è°ƒæ•´ã€‚
  - ä¸ä¸»æ•°æ®ï¼ˆä»“åº“/åº“ä½ï¼‰ã€é‡‡è´­ï¼ˆæ”¶è´§ï¼‰ã€é”€å”®ï¼ˆå‘è´§ï¼‰ã€ç”Ÿäº§ï¼ˆé¢†æ–™/å®Œå·¥ï¼‰é›†æˆã€‚
- é”€å”®ï¼ˆSalesï¼‰
  - é”€å”®è®¢å•ã€å‘è´§ã€å¼€ç¥¨ã€åº”æ”¶è´¦æ¬¾ã€‚
  - ä¸ä¸»æ•°æ®ï¼ˆå®¢æˆ·/ç‰©æ–™ï¼‰ã€åº“å­˜ï¼ˆé¢„ç•™/å‡ºåº“ï¼‰ã€è´¢åŠ¡ï¼ˆåº”æ”¶ï¼‰é›†æˆã€‚

```mermaid
sequenceDiagram
participant SALES as "Sales"
participant INV as "Inventory"
participant FIN as "Finance"
participant BUS as "Dapr äº‹ä»¶æ€»çº¿"
SALES->>INV : "åˆ›å»ºé¢„ç•™"
INV-->>SALES : "é¢„ç•™ç¡®è®¤"
SALES->>BUS : "ShipmentConfirmedEvent"
BUS-->>INV : "æŠ•é€’äº‹ä»¶"
INV->>INV : "æ‰§è¡Œå‡ºåº“å¹¶é‡Šæ”¾é¢„ç•™"
INV-->>SALES : "åº“å­˜å˜æ›´é€šçŸ¥"
SALES->>BUS : "InvoiceGeneratedEvent"
BUS-->>FIN : "æŠ•é€’äº‹ä»¶"
FIN->>FIN : "ç”Ÿæˆåº”æ”¶å‡­è¯"
```

å›¾ç¤ºæ¥æº
- [docs/PRD-05-Inventory-Service.md](file://docs/PRD-05-Inventory-Service.md#L341-L359)

ç« èŠ‚æ¥æº
- [docs/PRD-05-Inventory-Service.md](file://docs/PRD-05-Inventory-Service.md#L1-L528)
- [src/Services/Procurement/ErpSystem.Procurement/Program.cs](file://src/Services/Procurement/ErpSystem.Procurement/Program.cs#L1-L80)
- [src/Services/Sales/ErpSystem.Sales/Program.cs](file://src/Services/Sales/ErpSystem.Sales/Program.cs#L1-L80)

### ç”Ÿäº§åˆ¶é€ æœåŠ¡ï¼ˆProductionï¼‰
- åŠŸèƒ½èŒƒå›´
  - ç”Ÿäº§è®¢å•ã€BOMã€åœ¨åˆ¶å“è·Ÿè¸ªã€æ•ˆç‡æŠ¥å‘Šã€‚
  - ä¸ä¸»æ•°æ®ï¼ˆç‰©æ–™/BOMï¼‰ã€åº“å­˜ï¼ˆé¢†æ–™/å®Œå·¥ï¼‰ã€è´¢åŠ¡ï¼ˆæˆæœ¬ç»“è½¬ï¼‰é›†æˆã€‚
- æŠ€æœ¯å®ç°
  - äº‹ä»¶é©±åŠ¨ï¼Œèšåˆæ ¹çŠ¶æ€å˜æ›´é€šè¿‡äº‹ä»¶å­˜å‚¨ä¸æŠ•å½±ã€‚

ç« èŠ‚æ¥æº
- [README.md](file://README.md#L77-L84)

### é¡¹ç›®ç®¡ç†æœåŠ¡ï¼ˆProjectsï¼‰
- åŠŸèƒ½èŒƒå›´
  - é¡¹ç›®ã€ä»»åŠ¡ã€å·¥æ—¶ç®¡ç†ï¼Œèµ„æºè§„åˆ’ä¸è¿›åº¦è·Ÿè¸ªã€‚
- é›†æˆæ¨¡å¼
  - ä¸HRï¼ˆäººå‘˜ï¼‰ã€åº“å­˜ï¼ˆç‰©æ–™ï¼‰ã€è´¢åŠ¡ï¼ˆæˆæœ¬ï¼‰ååŒã€‚

ç« èŠ‚æ¥æº
- [README.md](file://README.md#L81-L83)

### äººåŠ›èµ„æºä¸è–ªé…¬ï¼ˆHR/Payrollï¼‰
- HRï¼šå‘˜å·¥æ¡£æ¡ˆã€ç»„ç»‡æ¶æ„ã€æ•°æ®æƒé™ã€‚
- Payrollï¼šè–ªèµ„è®¡ç®—ã€å‘æ”¾ã€æŠ¥è¡¨ã€‚
- é›†æˆï¼šHRäº‹ä»¶è§¦å‘Identityç”¨æˆ·å¢å¼ºï¼Œè–ªé…¬ä¸è´¢åŠ¡å¯¹è´¦ã€‚

ç« èŠ‚æ¥æº
- [README.md](file://README.md#L90-L96)

### èµ„äº§ç®¡ç†æœåŠ¡ï¼ˆAssetsï¼‰
- èµ„äº§å…¨ç”Ÿå‘½å‘¨æœŸï¼šé‡‡è´­ã€ç™»è®°ã€æŠ˜æ—§ã€ç»´ä¿®ã€æŠ¥åºŸã€‚
- ä¸è´¢åŠ¡ï¼ˆæŠ˜æ—§ï¼‰é›†æˆã€‚

ç« èŠ‚æ¥æº
- [README.md](file://README.md#L49)

### è´¨é‡æœåŠ¡ï¼ˆQualityï¼‰
- è´¨æ£€ã€è´¨é‡æŠ¥è­¦ã€è´¨é‡åˆ†æã€‚
- ä¸ä¾›åº”é“¾ï¼ˆæ£€éªŒï¼‰è”åŠ¨ã€‚

ç« èŠ‚æ¥æº
- [README.md](file://README.md#L311)

### è‡ªåŠ¨åŒ–æœåŠ¡ï¼ˆAutomationï¼‰
- å·¥ä½œæµå¼•æ“ï¼šè§„åˆ™é©±åŠ¨çš„è‡ªåŠ¨åŒ–æµç¨‹ã€‚
- ä¸åˆ†æï¼ˆé€šçŸ¥ï¼‰ååŒã€‚

ç« èŠ‚æ¥æº
- [README.md](file://README.md#L313)

### ç»´æŠ¤æœåŠ¡ï¼ˆMaintenanceï¼‰
- è®¾å¤‡ç»´æŠ¤è®¡åˆ’ä¸å·¥å•ã€‚
- ä¸èµ„äº§è”åŠ¨ã€‚

ç« èŠ‚æ¥æº
- [README.md](file://README.md#L314)

### æŠ¥å‘Šä¸åˆ†ææœåŠ¡ï¼ˆReporting/Analyticsï¼‰
- BIä»ªè¡¨ç›˜ã€é”€å”®è¶‹åŠ¿ã€åº“å­˜æŠ¥è¡¨ã€è´¢åŠ¡æ±‡æ€»ã€ç”Ÿäº§æ•ˆç‡æŒ‡æ ‡ã€‚
- å®æ—¶ä»ªè¡¨ç›˜ï¼ˆSignalR/WebSocketsï¼‰ä¸AIé¢„æµ‹ï¼ˆML.NETï¼‰ã€‚

ç« èŠ‚æ¥æº
- [README.md](file://README.md#L100-L123)

### CRMæœåŠ¡ï¼ˆCRMï¼‰
- å®¢æˆ·360Â°è§†å›¾ã€å•†æœºã€çº¿ç´¢ã€è¥é”€æ´»åŠ¨ã€‚
- ä¸é”€å”®ã€è´¢åŠ¡ã€é¡¹ç›®ååŒã€‚

ç« èŠ‚æ¥æº
- [README.md](file://README.md#L66-L73)

## ä¾èµ–åˆ†æ
- æœåŠ¡é—´ä¾èµ–
  - Identityï¼šæ‰€æœ‰æœåŠ¡çš„å‰ç½®ä¾èµ–ï¼ˆé‰´æƒä¸æƒé™ï¼‰ã€‚
  - MasterDataï¼šä¾›åº”é“¾ã€è´¢åŠ¡ã€é”€å”®ã€é¡¹ç›®ç­‰å¹¿æ³›ä¾èµ–ã€‚
  - ä¾›åº”é“¾ï¼šInventoryä¾èµ–MasterDataä¸Procurement/Salesäº‹ä»¶ï¼›Sales/Procurementä¾èµ–Inventoryé¢„ç•™/å‡ºåº“ã€‚
  - Financeï¼šä¾èµ–ä¾›åº”é“¾äº‹ä»¶è¿›è¡Œè‡ªåŠ¨è®°è´¦ã€‚
- æ•°æ®æµä¸äº‹ä»¶ä¼ æ’­
  - äº‹ä»¶æ€»çº¿ä½œä¸ºä¸­æ¢ï¼ŒæœåŠ¡é€šè¿‡å‘å¸ƒ/è®¢é˜…å®ç°è§£è€¦ã€‚
  - äº‹ä»¶å­˜å‚¨ç¡®ä¿å¯è¿½æº¯ä¸é‡æ”¾ã€‚
- å¤–éƒ¨ä¾èµ–
  - PostgreSQLç”¨äºäº‹ä»¶å­˜å‚¨ä¸è¯»åº“ã€‚
  - TimescaleDBç”¨äºæ—¶åºåˆ†æã€‚
  - Redisç”¨äºç¼“å­˜ä¸DaprçŠ¶æ€ç®¡ç†ã€‚

```mermaid
graph LR
ID["Identity"] --> |é‰´æƒ| ALL["å…¨éƒ¨æœåŠ¡"]
MD["MasterData"] --> INV["Inventory"]
MD --> FIN["Finance"]
MD --> SALES["Sales"]
MD --> PROC["Procurement"]
PROC --> INV
INV --> SALES
INV --> FIN
SALES --> FIN
```

å›¾ç¤ºæ¥æº
- [README.md](file://README.md#L173-L183)

ç« èŠ‚æ¥æº
- [README.md](file://README.md#L173-L183)

## æ€§èƒ½è€ƒè™‘
- äº‹ä»¶æº¯æºä¸CQRSï¼šå†™æ¨¡å‹äº‹ä»¶æŒä¹…åŒ–ï¼Œè¯»æ¨¡å‹æŠ•å½±ï¼Œé™ä½æŸ¥è¯¢å‹åŠ›ã€‚
- ç¼“å­˜ä¸å¹‚ç­‰ï¼šåˆ†å¸ƒå¼ç¼“å­˜ä¸å¹‚ç­‰è¡Œä¸ºï¼Œé¿å…é‡å¤å¤„ç†ã€‚
- å¼¹æ€§ä¸å¯è§‚æµ‹æ€§ï¼šPollyé‡è¯•/ç†”æ–­/è¶…æ—¶ç­–ç•¥ï¼ŒAspireå¯è§‚æµ‹æ€§ã€‚
- æ•°æ®åº“ï¼šPostgreSQLä¸»å­˜å‚¨ï¼ŒTimescaleDBæ—¶åºåˆ†æï¼ŒRedisç¼“å­˜ã€‚
- å¹¶å‘ä¸ååï¼šæœåŠ¡ç‹¬ç«‹æ‰©å±•ï¼Œäº‹ä»¶æ€»çº¿å¼‚æ­¥è§£è€¦ã€‚

## æ•…éšœæ’é™¤æŒ‡å—
- äº‹ä»¶æœªæŠ•é€’/é‡å¤æ¶ˆè´¹
  - æ£€æŸ¥Dapr Pub/Subé…ç½®ä¸è®¢é˜…ç«¯ç‚¹ã€‚
  - ç¡®è®¤äº‹ä»¶å­˜å‚¨ä¸Outbox/Inboxæœºåˆ¶æ­£ç¡®å·¥ä½œã€‚
- æ•°æ®ä¸ä¸€è‡´
  - æ ¸å¯¹äº‹ä»¶é¡ºåºä¸æŠ•å½±æ˜¯å¦å®Œæˆã€‚
  - ä½¿ç”¨å®¡è®¡æ—¥å¿—ä¸äº‹ä»¶é‡æ”¾å®šä½é—®é¢˜ã€‚
- é‰´æƒå¤±è´¥
  - æ£€æŸ¥JWTç­¾åéªŒè¯ä¸­é—´ä»¶ä¸IdentityæœåŠ¡è¿é€šæ€§ã€‚
- æ•°æ®åº“è¿æ¥
  - ç¡®è®¤è¿æ¥å­—ç¬¦ä¸²ä¸æ•°æ®åº“å®ä¾‹å¯ç”¨æ€§ã€‚
- å¥åº·æ£€æŸ¥
  - é€šè¿‡/healthç«¯ç‚¹å¿«é€Ÿå®šä½æœåŠ¡çŠ¶æ€ã€‚

ç« èŠ‚æ¥æº
- [src/Services/Identity/ErpSystem.Identity/Program.cs](file://src/Services/Identity/ErpSystem.Identity/Program.cs#L55-L58)
- [src/Services/Finance/ErpSystem.Finance/Program.cs](file://src/Services/Finance/ErpSystem.Finance/Program.cs#L60-L62)
- [src/Services/Procurement/ErpSystem.Procurement/Program.cs](file://src/Services/Procurement/ErpSystem.Procurement/Program.cs#L52-L56)
- [src/Services/Sales/ErpSystem.Sales/Program.cs](file://src/Services/Sales/ErpSystem.Sales/Program.cs#L52-L56)

## ç»“è®º
è¯¥ERPå¾®æœåŠ¡ç³»ç»Ÿä»¥äº‹ä»¶é©±åŠ¨ä¸ºæ ¸å¿ƒï¼Œç»“åˆäº‹ä»¶æº¯æºã€CQRSã€å¤šç§Ÿæˆ·ä¸Dapräº‘åŸç”Ÿèƒ½åŠ›ï¼Œå®ç°äº†ä¾›åº”é“¾ã€è´¢åŠ¡ã€ç”Ÿäº§ã€é¡¹ç›®ã€HRã€è–ªé…¬ã€èµ„äº§ã€è´¨é‡ã€è‡ªåŠ¨åŒ–ã€ç»´æŠ¤ã€æŠ¥å‘Šã€åˆ†æä¸BIã€CRMç­‰15ä¸ªä¸šåŠ¡åŸŸçš„è§£è€¦ä¸ååŒã€‚é€šè¿‡æ¸…æ™°çš„æœåŠ¡è¾¹ç•Œã€å®Œå–„çš„äº‹ä»¶ä¼ æ’­æœºåˆ¶ä¸ç‹¬ç«‹éƒ¨ç½²èƒ½åŠ›ï¼Œç³»ç»Ÿå…·å¤‡è‰¯å¥½çš„æ‰©å±•æ€§ä¸è¿ç»´å¼¹æ€§ï¼Œèƒ½å¤Ÿæ»¡è¶³å¤æ‚ä¼ä¸šåœºæ™¯ä¸‹çš„ä¸šåŠ¡æ¼”è¿›ä¸æŠ€æœ¯å‡çº§éœ€æ±‚ã€‚

## é™„å½•
- éƒ¨ç½²å‘½åç©ºé—´
  - Kuberneteså‘½åç©ºé—´ï¼šerp-systemï¼Œä¾¿äºèµ„æºéš”ç¦»ä¸æ²»ç†ã€‚

ç« èŠ‚æ¥æº
- [deploy/k8s/namespace.yaml](file://deploy/k8s/namespace.yaml#L1-L8)