# ä¸“ä¸šä¸šåŠ¡æœåŠ¡

<cite>
**æœ¬æ–‡å¼•ç”¨çš„æ–‡ä»¶**
- [README.md](file://README.md)
- [Program.cs](file://src/Services/Analytics/ErpSystem.Analytics/Program.cs)
- [DashboardsController.cs](file://src/Services/Analytics/ErpSystem.Analytics/API/DashboardsController.cs)
- [AnalyticsHub.cs](file://src/Services/Analytics/ErpSystem.Analytics/API/Hubs/AnalyticsHub.cs)
- [ForecastingAppService.cs](file://src/Services/Analytics/ErpSystem.Analytics/Application/ForecastingAppService.cs)
- [DemandForecastEngine.cs](file://src/Services/Analytics/ErpSystem.Analytics/Infrastructure/DemandForecastEngine.cs)
- [BiAnalyticsService.cs](file://src/Services/Analytics/ErpSystem.Analytics/Infrastructure/BiAnalyticsService.cs)
- [TimescaleDataExtractor.cs](file://src/Services/Analytics/ErpSystem.Analytics/Infrastructure/TimescaleDataExtractor.cs)
- [Program.cs](file://src/Services/Reporting/ErpSystem.Reporting/Program.cs)
- [DashboardController.cs](file://src/Services/Reporting/ErpSystem.Reporting/Controllers/DashboardController.cs)
- [ReportsController.cs](file://src/Services/Reporting/ErpSystem.Reporting/Controllers/ReportsController.cs)
- [DashboardService.cs](file://src/Services/Reporting/ErpSystem.Reporting/Application/DashboardService.cs)
- [ReportService.cs](file://src/Services/Reporting/ErpSystem.Reporting/Application/ReportService.cs)
- [Program.cs](file://src/Services/Assets/ErpSystem.Assets/Program.cs)
- [AssetsControllers.cs](file://src/Services/Assets/ErpSystem.Assets/API/AssetsControllers.cs)
- [AssetAggregate.cs](file://src/Services/Assets/ErpSystem.Assets/Domain/AssetAggregate.cs)
- [Persistence.cs](file://src/Services/Assets/ErpSystem.Assets/Infrastructure/Persistence.cs)
- [Projections.cs](file://src/Services/Assets/ErpSystem.Assets/Infrastructure/Projections.cs)
- [Program.cs](file://src/Services/Maintenance/ErpSystem.Maintenance/Program.cs)
- [EquipmentAggregate.cs](file://src/Services/Maintenance/ErpSystem.Maintenance/Domain/EquipmentAggregate.cs)
- [MaintenancePlanAggregate.cs](file://src/Services/Maintenance/ErpSystem.Maintenance/Domain/MaintenancePlanAggregate.cs)
- [Program.cs](file://src/Services/Payroll/ErpSystem.Payroll/Program.cs)
- [PayrollControllers.cs](file://src/Services/Payroll/ErpSystem.Payroll/API/PayrollControllers.cs)
- [PayrollAggregate.cs](file://src/Services/Payroll/ErpSystem.Payroll/Domain/PayrollAggregate.cs)
- [Program.cs](file://src/Services/Projects/ErpSystem.Projects/Program.cs)
- [ProjectsController.cs](file://src/Services/Projects/ErpSystem.Projects/API/ProjectsController.cs)
- [TasksController.cs](file://src/Services/Projects/ErpSystem.Projects/API/TasksController.cs)
- [TimesheetsController.cs](file://src/Services/Projects/ErpSystem.Projects/API/TimesheetsController.cs)
- [ProjectAggregate.cs](file://src/Services/Projects/ErpSystem.Projects/Domain/ProjectAggregate.cs)
- [TimesheetAggregate.cs](file://src/Services/Projects/ErpSystem.Projects/Domain/TimesheetAggregate.cs)
- [Program.cs](file://src/Services/CRM/ErpSystem.CRM/Program.cs)
- [LeadsController.cs](file://src/Services/CRM/ErpSystem.CRM/API/LeadsController.cs)
- [OpportunitiesController.cs](file://src/Services/CRM/ErpSystem.CRM/API/OpportunitiesController.cs)
- [CampaignsController.cs](file://src/Services/CRM/ErpSystem.CRM/API/CampaignsController.cs)
- [LeadAggregate.cs](file://src/Services/CRM/ErpSystem.CRM/Domain/LeadAggregate.cs)
- [OpportunityAggregate.cs](file://src/Services/CRM/ErpSystem.CRM/Domain/OpportunityAggregate.cs)
- [CampaignAggregate.cs](file://src/Services/CRM/ErpSystem.CRM/Domain/CampaignAggregate.cs)
</cite>

## ç›®å½•
1. [å¼•è¨€](#å¼•è¨€)
2. [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
3. [æ ¸å¿ƒç»„ä»¶](#æ ¸å¿ƒç»„ä»¶)
4. [æ¶æ„æ€»è§ˆ](#æ¶æ„æ€»è§ˆ)
5. [è¯¦ç»†ç»„ä»¶åˆ†æ](#è¯¦ç»†ç»„ä»¶åˆ†æ)
6. [ä¾èµ–åˆ†æ](#ä¾èµ–åˆ†æ)
7. [æ€§èƒ½è€ƒè™‘](#æ€§èƒ½è€ƒè™‘)
8. [æ•…éšœæ’é™¤æŒ‡å—](#æ•…éšœæ’é™¤æŒ‡å—)
9. [ç»“è®º](#ç»“è®º)
10. [é™„å½•](#é™„å½•)

## å¼•è¨€
æœ¬æ–‡ä»¶é¢å‘ä¸“ä¸šä¸šåŠ¡æœåŠ¡ï¼Œå›´ç»•åˆ†ææœåŠ¡ã€æŠ¥å‘ŠæœåŠ¡ã€èµ„äº§ç®¡ç†ã€ç»´æŠ¤ç®¡ç†ã€è–ªèµ„ç®¡ç†ã€é¡¹ç›®ç®¡ç†ã€å®¢æˆ·å…³ç³»ç®¡ç†ç­‰æ¨¡å—ï¼Œç³»ç»Ÿé˜è¿°å…¶æ¶æ„ã€æ•°æ®æµã€å¤„ç†é€»è¾‘ä¸é›†æˆç‚¹ã€‚å†…å®¹æ—¢è¦†ç›–å®æ—¶ä»ªè¡¨æ¿ä¸é¢„æµ‹åˆ†æç­‰æ™ºèƒ½åˆ†æèƒ½åŠ›ï¼Œä¹Ÿæ¶µç›–BIä»ªè¡¨æ¿ã€æŠ¥è¡¨ç”Ÿæˆä¸æ•°æ®å¯è§†åŒ–ç­‰å•†ä¸šæ™ºèƒ½åŠŸèƒ½ï¼›åŒæ—¶åŒ…å«èµ„äº§ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€é¢„é˜²æ€§ç»´æŠ¤ä¸è®¾å¤‡ç›‘æ§ã€è–ªèµ„è®¡ç®—ä¸ç¨åŠ¡å¤„ç†ã€é¡¹ç›®è§„åˆ’ä¸å·¥æ—¶è·Ÿè¸ªã€ä»¥åŠé”€å”®çº¿ç´¢ä¸å•†æœºç®¡ç†ç­‰ä¸“ä¸šåŒ–ä¸šåŠ¡èƒ½åŠ›ã€‚

## é¡¹ç›®ç»“æ„
- å¾®æœåŠ¡é‡‡ç”¨é¢†åŸŸé©±åŠ¨è®¾è®¡ä¸äº‹ä»¶æº¯æºæ¨¡å¼ï¼Œæ ¸å¿ƒä¸šåŠ¡æœåŠ¡åŒ…æ‹¬ï¼šFinanceã€Inventoryã€Salesã€Procurementã€Productionã€CRMã€Projects ç­‰ï¼›æ”¯æ’‘æœåŠ¡åŒ…æ‹¬ï¼šHRã€Payrollã€Assetsã€Identityã€MasterDataã€MRPã€Reportingï¼›å¹³å°æœåŠ¡åŒ…æ‹¬ï¼šAutomationã€Qualityã€Maintenanceã€Settingsã€Analyticsã€‚
- åˆ†æä¸æŠ¥å‘ŠæœåŠ¡åˆ†åˆ«æä¾›å®æ—¶ä»ªè¡¨æ¿ã€é¢„æµ‹åˆ†æä¸BIä»ªè¡¨æ¿ã€æŠ¥è¡¨ç”Ÿæˆä¸å¯è§†åŒ–èƒ½åŠ›ï¼›èµ„äº§ç®¡ç†ã€ç»´æŠ¤ç®¡ç†ã€è–ªèµ„ç®¡ç†ã€é¡¹ç›®ç®¡ç†ã€CRMç­‰æ¨¡å—å‡é‡‡ç”¨äº‹ä»¶æº¯æºä¸CQRSåˆ†ç¦»è¯»å†™æ¨¡å‹ã€‚

```mermaid
graph TB
subgraph "ç½‘å…³å±‚"
GW["YARP API ç½‘å…³"]
end
subgraph "æ ¸å¿ƒä¸šåŠ¡æœåŠ¡"
FIN["ğŸ’° Finance"]
INV["ğŸ“¦ Inventory"]
SALES["ğŸ›’ Sales"]
PROC["ğŸ“‹ Procurement"]
PROD["ğŸ­ Production"]
CRM["ğŸ¤ CRM"]
PROJ["ğŸ“… Projects"]
end
subgraph "æ”¯æ’‘æœåŠ¡"
HR["ğŸ‘¥ HR"]
PAY["ğŸ’¸ Payroll"]
ASSET["ğŸ¢ Assets"]
ID["ğŸ” Identity"]
MD["ğŸ“ MasterData"]
MRP["ğŸ“ˆ MRP"]
RPT["ğŸ“Š Reporting"]
end
subgraph "å¹³å°æœåŠ¡"
AUTO["ğŸ¤– Automation"]
QUAL["âœ… Quality"]
MAINT["ğŸ”§ Maintenance"]
SET["âš™ï¸ Settings"]
ANA["ğŸ“‰ Analytics"]
end
subgraph "åŸºç¡€è®¾æ–½"
PG["PostgreSQL"]
TSDB["TimescaleDB"]
REDIS["Redis"]
DAPR["Dapr ä¾§è½¦"]
end
GW --> FIN & INV & SALES & PROC & PROD & CRM & PROJ
GW --> HR & PAY & ASSET & ID & MD & MRP & RPT
GW -.->|"SignalR/WebSocket"| ANA
FIN & INV & SALES & CRM & PROJ -.->|"äº‹ä»¶æ€»çº¿"| DAPR
DAPR -.-> AUTO & ANA
FIN & INV & SALES --> PG
ANA --> TSDB
ID --> REDIS
```

å›¾è¡¨æ¥æº
- [README.md](file://README.md#L130-L183)

ç« èŠ‚æ¥æº
- [README.md](file://README.md#L130-L183)

## æ ¸å¿ƒç»„ä»¶
- åˆ†ææœåŠ¡ï¼ˆAnalyticsï¼‰
  - å®æ—¶ä»ªè¡¨æ¿ä¸é¢„æµ‹åˆ†æï¼šåŸºäºSignalRå®ç°å®æ—¶æ¨é€ï¼Œç»“åˆML.NETè¿›è¡Œéœ€æ±‚é¢„æµ‹ï¼Œä½¿ç”¨TimescaleDBå­˜å‚¨é«˜ç»´æ—¶é—´åºåˆ—æ•°æ®ã€‚
  - å…³é”®ç»„ä»¶ï¼šForecastingAppServiceã€DemandForecastEngineã€BiAnalyticsServiceã€TimescaleDataExtractorã€AnalyticsHubã€‚
- æŠ¥å‘ŠæœåŠ¡ï¼ˆReportingï¼‰
  - BIä»ªè¡¨æ¿ä¸æŠ¥è¡¨ç”Ÿæˆï¼šæä¾›ä»ªè¡¨ç›˜èšåˆä¸æŠ¥è¡¨æœåŠ¡ï¼Œæ”¯æŒå¥åº·æ£€æŸ¥ä¸Swaggeræ–‡æ¡£ã€‚
  - å…³é”®ç»„ä»¶ï¼šDashboardServiceã€ReportServiceã€DashboardControllerã€ReportsControllerã€‚
- èµ„äº§ç®¡ç†ï¼ˆAssetsï¼‰
  - å›ºå®šèµ„äº§å…¨ç”Ÿå‘½å‘¨æœŸï¼šè®¾å¤‡ç™»è®°ã€æŠ˜æ—§è®¡ç®—ã€ç»´æŠ¤è®¡åˆ’ä¸å˜æ›´è¿½è¸ªï¼Œé‡‡ç”¨äº‹ä»¶æº¯æºä¸è¯»æ¨¡å‹æŠ•å½±ã€‚
  - å…³é”®ç»„ä»¶ï¼šAssetAggregateã€AssetsControllersã€Persistenceã€Projectionsã€‚
- ç»´æŠ¤ç®¡ç†ï¼ˆMaintenanceï¼‰
  - é¢„é˜²æ€§ç»´æŠ¤ä¸ç»´ä¿®å·¥å•ï¼šè®¾å¤‡ä¸ç»´æŠ¤è®¡åˆ’èšåˆï¼Œæ”¯æŒäº‹ä»¶é©±åŠ¨çš„ç»´æŠ¤è°ƒåº¦ã€‚
  - å…³é”®ç»„ä»¶ï¼šEquipmentAggregateã€MaintenancePlanAggregateã€‚
- è–ªèµ„ç®¡ç†ï¼ˆPayrollï¼‰
  - è–ªé…¬è®¡ç®—ä¸å‘æ”¾ï¼šè–ªèµ„èšåˆä¸äº‹ä»¶é©±åŠ¨å¤„ç†ï¼Œæ”¯æŒä¸HR/Financeé›†æˆã€‚
  - å…³é”®ç»„ä»¶ï¼šPayrollAggregateã€PayrollControllersã€‚
- é¡¹ç›®ç®¡ç†ï¼ˆProjectsï¼‰
  - é¡¹ç›®è§„åˆ’ã€ä»»åŠ¡ç®¡ç†ä¸å·¥æ—¶è·Ÿè¸ªï¼šé¡¹ç›®ä¸å·¥æ—¶èšåˆï¼Œæ”¯æŒè¯»æ¨¡å‹æŠ•å½±ã€‚
  - å…³é”®ç»„ä»¶ï¼šProjectAggregateã€TimesheetAggregateã€ProjectsControllerã€TasksControllerã€TimesheetsControllerã€‚
- å®¢æˆ·å…³ç³»ç®¡ç†ï¼ˆCRMï¼‰
  - çº¿ç´¢ã€å•†æœºä¸è¥é”€æ´»åŠ¨ï¼šçº¿ç´¢ä¸æœºä¼šèšåˆï¼Œæ”¯æŒæ´»åŠ¨ç®¡ç†ã€‚
  - å…³é”®ç»„ä»¶ï¼šLeadAggregateã€OpportunityAggregateã€CampaignAggregateã€LeadsControllerã€OpportunitiesControllerã€CampaignsControllerã€‚

ç« èŠ‚æ¥æº
- [Program.cs](file://src/Services/Analytics/ErpSystem.Analytics/Program.cs#L1-L83)
- [Program.cs](file://src/Services/Reporting/ErpSystem.Reporting/Program.cs#L1-L35)
- [Program.cs](file://src/Services/Assets/ErpSystem.Assets/Program.cs#L1-L45)
- [Program.cs](file://src/Services/Maintenance/ErpSystem.Maintenance/Program.cs#L1-L62)
- [Program.cs](file://src/Services/Payroll/ErpSystem.Payroll/Program.cs#L1-L45)
- [Program.cs](file://src/Services/Projects/ErpSystem.Projects/Program.cs#L1-L49)
- [Program.cs](file://src/Services/CRM/ErpSystem.CRM/Program.cs#L1-L74)

## æ¶æ„æ€»è§ˆ
- äº‹ä»¶æº¯æºä¸CQRSï¼šå„æœåŠ¡å‡é‡‡ç”¨äº‹ä»¶æº¯æºè®°å½•å˜æ›´ï¼Œè¯»æ¨¡å‹ç‹¬ç«‹æŠ•å½±ï¼Œæ”¯æŒè·¨æœåŠ¡äº‹ä»¶æ€»çº¿é€šä¿¡ã€‚
- å®æ—¶èƒ½åŠ›ï¼šAnalyticsæœåŠ¡é€šè¿‡SignalRæä¾›å®æ—¶ä»ªè¡¨æ¿ï¼Œç»“åˆTimescaleDBå®ç°é«˜æ€§èƒ½æ—¶é—´åºåˆ—åˆ†æã€‚
- æœºå™¨å­¦ä¹ ï¼šAnalyticsæœåŠ¡å†…ç½®é¢„æµ‹åˆ†æå¼•æ“ï¼Œæ”¯æŒéœ€æ±‚é¢„æµ‹ä¸ç½®ä¿¡åŒºé—´è¾“å‡ºã€‚
- BIä¸æŠ¥è¡¨ï¼šReportingæœåŠ¡æä¾›ä»ªè¡¨ç›˜èšåˆä¸æŠ¥è¡¨ç”Ÿæˆï¼Œæ”¯æŒå¥åº·æ£€æŸ¥ä¸Swaggeræ–‡æ¡£ã€‚

```mermaid
graph TB
subgraph "Analytics æœåŠ¡"
AH["AnalyticsHub<br/>SignalR å®æ—¶æ¨é€"]
FAS["ForecastingAppService<br/>é¢„æµ‹åº”ç”¨æœåŠ¡"]
DFE["DemandForecastEngine<br/>é¢„æµ‹å¼•æ“"]
TDE["TimescaleDataExtractor<br/>æ—¶é—´åºåˆ—æå–"]
BAS["BiAnalyticsService<br/>BI åˆ†ææœåŠ¡"]
end
subgraph "Reporting æœåŠ¡"
DS["DashboardService<br/>ä»ªè¡¨ç›˜æœåŠ¡"]
RS["ReportService<br/>æŠ¥è¡¨æœåŠ¡"]
DC["DashboardController"]
RC["ReportsController"]
end
subgraph "å¹³å°ä¸åŸºç¡€è®¾æ–½"
TSDB["TimescaleDB<br/>æ—¶åºæ•°æ®åº“"]
DAPR["Dapr äº‹ä»¶æ€»çº¿"]
end
AH --> DAPR
FAS --> DFE
FAS --> BAS
DFE --> TSDB
TDE --> TSDB
DS --> DAPR
RS --> DAPR
```

å›¾è¡¨æ¥æº
- [Program.cs](file://src/Services/Analytics/ErpSystem.Analytics/Program.cs#L1-L83)
- [Program.cs](file://src/Services/Reporting/ErpSystem.Reporting/Program.cs#L1-L35)

ç« èŠ‚æ¥æº
- [Program.cs](file://src/Services/Analytics/ErpSystem.Analytics/Program.cs#L1-L83)
- [Program.cs](file://src/Services/Reporting/ErpSystem.Reporting/Program.cs#L1-L35)

## è¯¦ç»†ç»„ä»¶åˆ†æ

### åˆ†ææœåŠ¡ï¼ˆAnalyticsï¼‰
- å®æ—¶ä»ªè¡¨æ¿ä¸é¢„æµ‹åˆ†æ
  - SignalRå®æ—¶æ¨é€ï¼šAnalyticsHubæä¾›WebSocketè¿æ¥ï¼Œå‘å®¢æˆ·ç«¯æ¨é€æœ€æ–°æŒ‡æ ‡ä¸é¢„æµ‹ç»“æœã€‚
  - éœ€æ±‚é¢„æµ‹ï¼šForecastingAppServiceåè°ƒé¢„æµ‹å¼•æ“ï¼ŒDemandForecastEngineæ‰§è¡Œé¢„æµ‹è®¡ç®—ï¼ŒBiAnalyticsServiceæä¾›BIåˆ†æèƒ½åŠ›ï¼ŒTimescaleDataExtractorè´Ÿè´£ä»æ—¶åºæ•°æ®åº“æŠ½å–æ•°æ®ã€‚
  - æ—¶é—´åºåˆ—å­˜å‚¨ï¼šä½¿ç”¨TimescaleDBå­˜å‚¨é«˜ç»´æ—¶é—´åºåˆ—ï¼Œæ”¯æŒå¿«é€Ÿèšåˆä¸è¶‹åŠ¿åˆ†æã€‚
- æ•°æ®æµä¸å¤„ç†é€»è¾‘
  - äº‹ä»¶æº¯æºï¼šæœåŠ¡é€šè¿‡äº‹ä»¶æ€»çº¿æ¥æ”¶ä¸šåŠ¡äº‹ä»¶ï¼Œå†™å…¥äº‹ä»¶å­˜å‚¨ï¼Œå†ç”±æŠ•å½±ç”Ÿæˆè¯»æ¨¡å‹ã€‚
  - é¢„æµ‹æµç¨‹ï¼šä»äº‹ä»¶æµèšåˆé”€å”®/åº“å­˜æ•°æ®ï¼Œç»TimescaleDataExtractorè½¬æ¢ä¸ºè®­ç»ƒæ ·æœ¬ï¼ŒDemandForecastEngineäº§å‡ºé¢„æµ‹ä¸ç½®ä¿¡åŒºé—´ï¼Œæœ€ç»ˆé€šè¿‡AnalyticsHubæ¨é€åˆ°å‰ç«¯ã€‚

```mermaid
sequenceDiagram
participant FE as "å‰ç«¯"
participant Hub as "AnalyticsHub"
participant FAS as "ForecastingAppService"
participant DFE as "DemandForecastEngine"
participant TDE as "TimescaleDataExtractor"
participant TS as "TimescaleDB"
FE->>Hub : "å»ºç«‹ SignalR è¿æ¥"
FAS->>TDE : "æŠ½å–æ—¶é—´åºåˆ—æ•°æ®"
TDE->>TS : "æŸ¥è¯¢å†å²æ•°æ®"
TS-->>TDE : "è¿”å›æ—¶é—´åºåˆ—"
FAS->>DFE : "æ‰§è¡Œé¢„æµ‹è®¡ç®—"
DFE-->>FAS : "è¿”å›é¢„æµ‹ç»“æœ"
FAS-->>Hub : "æ¨é€é¢„æµ‹ä¸æŒ‡æ ‡"
Hub-->>FE : "å®æ—¶æ›´æ–°ä»ªè¡¨æ¿"
```

å›¾è¡¨æ¥æº
- [AnalyticsHub.cs](file://src/Services/Analytics/ErpSystem.Analytics/API/Hubs/AnalyticsHub.cs)
- [ForecastingAppService.cs](file://src/Services/Analytics/ErpSystem.Analytics/Application/ForecastingAppService.cs)
- [DemandForecastEngine.cs](file://src/Services/Analytics/ErpSystem.Analytics/Infrastructure/DemandForecastEngine.cs)
- [TimescaleDataExtractor.cs](file://src/Services/Analytics/ErpSystem.Analytics/Infrastructure/TimescaleDataExtractor.cs)

ç« èŠ‚æ¥æº
- [Program.cs](file://src/Services/Analytics/ErpSystem.Analytics/Program.cs#L1-L83)
- [DashboardsController.cs](file://src/Services/Analytics/ErpSystem.Analytics/API/DashboardsController.cs)
- [AnalyticsHub.cs](file://src/Services/Analytics/ErpSystem.Analytics/API/Hubs/AnalyticsHub.cs)
- [ForecastingAppService.cs](file://src/Services/Analytics/ErpSystem.Analytics/Application/ForecastingAppService.cs)
- [DemandForecastEngine.cs](file://src/Services/Analytics/ErpSystem.Analytics/Infrastructure/DemandForecastEngine.cs)
- [BiAnalyticsService.cs](file://src/Services/Analytics/ErpSystem.Analytics/Infrastructure/BiAnalyticsService.cs)
- [TimescaleDataExtractor.cs](file://src/Services/Analytics/ErpSystem.Analytics/Infrastructure/TimescaleDataExtractor.cs)

### æŠ¥å‘ŠæœåŠ¡ï¼ˆReportingï¼‰
- BIä»ªè¡¨æ¿ä¸æŠ¥è¡¨ç”Ÿæˆ
  - DashboardServiceä¸ReportServiceæä¾›ä»ªè¡¨ç›˜èšåˆä¸æŠ¥è¡¨ç”Ÿæˆèƒ½åŠ›ï¼Œæ”¯æŒå¥åº·æ£€æŸ¥ä¸Swaggeræ–‡æ¡£ã€‚
  - æ§åˆ¶å™¨å±‚æä¾›RESTæ¥å£ï¼Œä¾¿äºå‰ç«¯è°ƒç”¨ä¸é›†æˆã€‚
- æ•°æ®æ¥æºä¸é›†æˆ
  - é€šè¿‡äº‹ä»¶æ€»çº¿è®¢é˜…æ ¸å¿ƒä¸šåŠ¡äº‹ä»¶ï¼Œæ„å»ºè¯»æ¨¡å‹ï¼Œæ”¯æŒè·¨æœåŠ¡èšåˆä¸åˆ†æã€‚

```mermaid
sequenceDiagram
participant FE as "å‰ç«¯"
participant DC as "DashboardController"
participant DS as "DashboardService"
participant RC as "ReportsController"
participant RS as "ReportService"
participant BUS as "äº‹ä»¶æ€»çº¿"
FE->>DC : "è¯·æ±‚ä»ªè¡¨ç›˜æ•°æ®"
DC->>DS : "èšåˆæŒ‡æ ‡"
DS->>BUS : "è®¢é˜…ä¸šåŠ¡äº‹ä»¶"
BUS-->>DS : "è¿”å›èšåˆç»“æœ"
DS-->>FE : "è¿”å›ä»ªè¡¨ç›˜æ•°æ®"
FE->>RC : "è¯·æ±‚æŠ¥è¡¨"
RC->>RS : "ç”ŸæˆæŠ¥è¡¨"
RS->>BUS : "è¯»å–è¯»æ¨¡å‹"
BUS-->>RS : "è¿”å›æŠ¥è¡¨æ•°æ®"
RS-->>FE : "è¿”å›æŠ¥è¡¨"
```

å›¾è¡¨æ¥æº
- [DashboardController.cs](file://src/Services/Reporting/ErpSystem.Reporting/Controllers/DashboardController.cs)
- [ReportsController.cs](file://src/Services/Reporting/ErpSystem.Reporting/Controllers/ReportsController.cs)
- [DashboardService.cs](file://src/Services/Reporting/ErpSystem.Reporting/Application/DashboardService.cs)
- [ReportService.cs](file://src/Services/Reporting/ErpSystem.Reporting/Application/ReportService.cs)

ç« èŠ‚æ¥æº
- [Program.cs](file://src/Services/Reporting/ErpSystem.Reporting/Program.cs#L1-L35)

### èµ„äº§ç®¡ç†ï¼ˆAssetsï¼‰
- è®¾å¤‡ç®¡ç†ä¸æŠ˜æ—§è®¡ç®—
  - èµ„äº§èšåˆå®šä¹‰è®¾å¤‡ç”Ÿå‘½å‘¨æœŸä¸æŠ˜æ—§ç­–ç•¥ï¼Œæ”¯æŒèµ„äº§ç™»è®°ã€å˜æ›´ä¸å¤„ç½®ã€‚
  - äº‹ä»¶æº¯æºè®°å½•èµ„äº§çŠ¶æ€å˜æ›´ï¼Œè¯»æ¨¡å‹æŠ•å½±ç”¨äºæŠ¥è¡¨ä¸ä»ªè¡¨æ¿å±•ç¤ºã€‚
- ç»´æŠ¤è®¡åˆ’
  - èµ„äº§ä¸ç»´æŠ¤è®¡åˆ’å…³è”ï¼Œæ”¯æŒé¢„é˜²æ€§ç»´æŠ¤æé†’ä¸å·¥å•ç”Ÿæˆã€‚

```mermaid
classDiagram
class AssetAggregate {
+string èµ„äº§ç¼–å·
+string åç§°
+decimal åŸå€¼
+decimal ç´¯è®¡æŠ˜æ—§
+DateTime å…¥è´¦æ—¥æœŸ
+çŠ¶æ€
+å˜æ›´()
+æŠ˜æ—§()
}
class AssetsControllers {
+åˆ›å»ºèµ„äº§()
+æ›´æ–°èµ„äº§()
+æŸ¥è¯¢èµ„äº§()
+å‘èµ·æŠ˜æ—§()
}
class Persistence {
+ä¿å­˜äº‹ä»¶()
+åŠ è½½èšåˆ()
}
class Projections {
+æŠ•å½±èµ„äº§è¯»æ¨¡å‹()
}
AssetsControllers --> AssetAggregate : "è°ƒç”¨"
AssetAggregate --> Persistence : "æŒä¹…åŒ–äº‹ä»¶"
Persistence --> Projections : "è§¦å‘æŠ•å½±"
```

å›¾è¡¨æ¥æº
- [AssetAggregate.cs](file://src/Services/Assets/ErpSystem.Assets/Domain/AssetAggregate.cs)
- [AssetsControllers.cs](file://src/Services/Assets/ErpSystem.Assets/API/AssetsControllers.cs)
- [Persistence.cs](file://src/Services/Assets/ErpSystem.Assets/Infrastructure/Persistence.cs)
- [Projections.cs](file://src/Services/Assets/ErpSystem.Assets/Infrastructure/Projections.cs)

ç« èŠ‚æ¥æº
- [Program.cs](file://src/Services/Assets/ErpSystem.Assets/Program.cs#L1-L45)

### ç»´æŠ¤ç®¡ç†ï¼ˆMaintenanceï¼‰
- é¢„é˜²æ€§ç»´æŠ¤ä¸ç»´ä¿®å·¥å•
  - è®¾å¤‡èšåˆä¸ç»´æŠ¤è®¡åˆ’èšåˆå…±åŒæ„æˆç»´æŠ¤ç®¡ç†ä½“ç³»ï¼Œæ”¯æŒå®šæœŸä¿å…»ä¸çªå‘ç»´ä¿®ã€‚
- äº‹ä»¶é©±åŠ¨
  - é€šè¿‡äº‹ä»¶æ€»çº¿è®¢é˜…è®¾å¤‡çŠ¶æ€å˜åŒ–ï¼Œè§¦å‘ç»´æŠ¤è®¡åˆ’æ‰§è¡Œä¸å·¥å•åˆ›å»ºã€‚

```mermaid
classDiagram
class EquipmentAggregate {
+string è®¾å¤‡ç¼–å·
+string åç§°
+string ç»´ä¿ç­‰çº§
+ä¸‹æ¬¡ç»´æŠ¤æ—¥æœŸ
+å˜æ›´çŠ¶æ€()
+è§¦å‘ç»´æŠ¤()
}
class MaintenancePlanAggregate {
+string è®¡åˆ’ç¼–å·
+string æè¿°
+å‘¨æœŸ(å¤©/æœˆ)
+ç»´æŠ¤é¡¹æ¸…å•
+ç”Ÿæˆå·¥å•()
}
EquipmentAggregate --> MaintenancePlanAggregate : "ç»‘å®š"
```

å›¾è¡¨æ¥æº
- [EquipmentAggregate.cs](file://src/Services/Maintenance/ErpSystem.Maintenance/Domain/EquipmentAggregate.cs)
- [MaintenancePlanAggregate.cs](file://src/Services/Maintenance/ErpSystem.Maintenance/Domain/MaintenancePlanAggregate.cs)

ç« èŠ‚æ¥æº
- [Program.cs](file://src/Services/Maintenance/ErpSystem.Maintenance/Program.cs#L1-L62)

### è–ªèµ„ç®¡ç†ï¼ˆPayrollï¼‰
- è–ªé…¬è®¡ç®—ä¸ç¨åŠ¡å¤„ç†
  - è–ªèµ„èšåˆç®¡ç†å‘˜å·¥è–ªé…¬æ„æˆã€æ‰£æ¬¾ä¸å‘æ”¾ï¼Œæ”¯æŒä¸HR/Financeäº‹ä»¶é›†æˆã€‚
- å‘æ”¾ä¸æŠ¥è¡¨
  - é€šè¿‡æ§åˆ¶å™¨æš´éœ²è–ªèµ„ç›¸å…³æ¥å£ï¼Œæ”¯æŒæŸ¥è¯¢ä¸å¯¼å‡ºã€‚

```mermaid
classDiagram
class PayrollAggregate {
+string è–ªèµ„å‘¨æœŸ
+string å‘˜å·¥ç¼–å·
+decimal åº”å‘é‡‘é¢
+decimal å®å‘é‡‘é¢
+æ˜ç»†é¡¹[]
+è®¡ç®—()
+ç¨åŠ¡å¤„ç†()
+ç”Ÿæˆå‘æ”¾()
}
class PayrollControllers {
+æŸ¥è¯¢è–ªèµ„()
+å¯¼å‡ºå‘æ”¾()
+æ‰¹é‡è®¡ç®—()
}
PayrollControllers --> PayrollAggregate : "è°ƒç”¨"
```

å›¾è¡¨æ¥æº
- [PayrollAggregate.cs](file://src/Services/Payroll/ErpSystem.Payroll/Domain/PayrollAggregate.cs)
- [PayrollControllers.cs](file://src/Services/Payroll/ErpSystem.Payroll/API/PayrollControllers.cs)

ç« èŠ‚æ¥æº
- [Program.cs](file://src/Services/Payroll/ErpSystem.Payroll/Program.cs#L1-L45)

### é¡¹ç›®ç®¡ç†ï¼ˆProjectsï¼‰
- é¡¹ç›®è§„åˆ’ã€ä»»åŠ¡ç®¡ç†ä¸å·¥æ—¶è·Ÿè¸ª
  - é¡¹ç›®èšåˆä¸å·¥æ—¶èšåˆæ”¯æ’‘é¡¹ç›®å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œè¯»æ¨¡å‹ç”¨äºæŠ¥è¡¨ä¸ä»ªè¡¨æ¿ã€‚
- åä½œä¸é›†æˆ
  - é€šè¿‡æ§åˆ¶å™¨æä¾›RESTæ¥å£ï¼Œæ”¯æŒå‰ç«¯åä½œä¸ç§»åŠ¨ç«¯è®¿é—®ã€‚

```mermaid
classDiagram
class ProjectAggregate {
+string é¡¹ç›®ç¼–å·
+string åç§°
+çŠ¶æ€
+å¼€å§‹æ—¥æœŸ
+ç»“æŸæ—¥æœŸ
+æ›´æ–°è¿›åº¦()
+å…³é—­()
}
class TimesheetAggregate {
+string å·¥æ—¶ç¼–å·
+string é¡¹ç›®ç¼–å·
+string å‘˜å·¥ç¼–å·
+decimal å·¥æ—¶
+æ—¥æœŸ
+æäº¤()
+å®¡æ ¸()
}
class ProjectsController {
+åˆ›å»ºé¡¹ç›®()
+æ›´æ–°é¡¹ç›®()
+æŸ¥è¯¢é¡¹ç›®()
}
class TasksController {
+åˆ›å»ºä»»åŠ¡()
+æ›´æ–°ä»»åŠ¡()
+æŸ¥è¯¢ä»»åŠ¡()
}
class TimesheetsController {
+æäº¤å·¥æ—¶()
+æŸ¥è¯¢å·¥æ—¶()
+å¯¼å‡ºæŠ¥è¡¨()
}
ProjectsController --> ProjectAggregate : "è°ƒç”¨"
TasksController --> ProjectAggregate : "å…³è”"
TimesheetsController --> TimesheetAggregate : "è°ƒç”¨"
```

å›¾è¡¨æ¥æº
- [ProjectAggregate.cs](file://src/Services/Projects/ErpSystem.Projects/Domain/ProjectAggregate.cs)
- [TimesheetAggregate.cs](file://src/Services/Projects/ErpSystem.Projects/Domain/TimesheetAggregate.cs)
- [ProjectsController.cs](file://src/Services/Projects/ErpSystem.Projects/API/ProjectsController.cs)
- [TasksController.cs](file://src/Services/Projects/ErpSystem.Projects/API/TasksController.cs)
- [TimesheetsController.cs](file://src/Services/Projects/ErpSystem.Projects/API/TimesheetsController.cs)

ç« èŠ‚æ¥æº
- [Program.cs](file://src/Services/Projects/ErpSystem.Projects/Program.cs#L1-L49)

### å®¢æˆ·å…³ç³»ç®¡ç†ï¼ˆCRMï¼‰
- çº¿ç´¢ç®¡ç†ã€å•†æœºè·Ÿè¸ªä¸è¥é”€æ´»åŠ¨
  - çº¿ç´¢ä¸æœºä¼šèšåˆæ”¯æ’‘é”€å”®æ¼æ–—ç®¡ç†ï¼Œæ´»åŠ¨èšåˆæ”¯æŒè¥é”€æ•ˆæœè¿½è¸ªã€‚
- äº‹ä»¶é©±åŠ¨ä¸è¯»æ¨¡å‹
  - é€šè¿‡äº‹ä»¶æ€»çº¿è®¢é˜…çº¿ç´¢/æœºä¼šçŠ¶æ€å˜åŒ–ï¼Œé©±åŠ¨è¥é”€æ´»åŠ¨ä¸è·Ÿè¿›ä»»åŠ¡ã€‚

```mermaid
classDiagram
class LeadAggregate {
+string çº¿ç´¢ç¼–å·
+string å§“å
+string ç”µè¯
+string æ¥æº
+çŠ¶æ€
+è½¬ç§»()
+å‡çº§()
}
class OpportunityAggregate {
+string å•†æœºç¼–å·
+string çº¿ç´¢ç¼–å·
+decimal é‡‘é¢
+é˜¶æ®µ
+æ¦‚ç‡%
+å…³é—­()
}
class CampaignAggregate {
+string æ´»åŠ¨ç¼–å·
+string åç§°
+DateTime å¼€å§‹æ—¥æœŸ
+DateTime ç»“æŸæ—¥æœŸ
+é¢„ç®—
+æ•ˆæœ()
}
class LeadsController {
+åˆ›å»ºçº¿ç´¢()
+æ›´æ–°çº¿ç´¢()
+æŸ¥è¯¢çº¿ç´¢()
}
class OpportunitiesController {
+åˆ›å»ºå•†æœº()
+æ›´æ–°å•†æœº()
+æŸ¥è¯¢å•†æœº()
}
class CampaignsController {
+åˆ›å»ºæ´»åŠ¨()
+æ›´æ–°æ´»åŠ¨()
+æŸ¥è¯¢æ´»åŠ¨()
}
LeadsController --> LeadAggregate : "è°ƒç”¨"
OpportunitiesController --> OpportunityAggregate : "è°ƒç”¨"
CampaignsController --> CampaignAggregate : "è°ƒç”¨"
```

å›¾è¡¨æ¥æº
- [LeadAggregate.cs](file://src/Services/CRM/ErpSystem.CRM/Domain/LeadAggregate.cs)
- [OpportunityAggregate.cs](file://src/Services/CRM/ErpSystem.CRM/Domain/OpportunityAggregate.cs)
- [CampaignAggregate.cs](file://src/Services/CRM/ErpSystem.CRM/Domain/CampaignAggregate.cs)
- [LeadsController.cs](file://src/Services/CRM/ErpSystem.CRM/API/LeadsController.cs)
- [OpportunitiesController.cs](file://src/Services/CRM/ErpSystem.CRM/API/OpportunitiesController.cs)
- [CampaignsController.cs](file://src/Services/CRM/ErpSystem.CRM/API/CampaignsController.cs)

ç« èŠ‚æ¥æº
- [Program.cs](file://src/Services/CRM/ErpSystem.CRM/Program.cs#L1-L74)

## ä¾èµ–åˆ†æ
- äº‹ä»¶æ€»çº¿ä¸è·¨æœåŠ¡é€šä¿¡ï¼šFinanceã€Inventoryã€Salesã€CRMã€Projectsç­‰æ ¸å¿ƒæœåŠ¡é€šè¿‡Dapräº‹ä»¶æ€»çº¿å‘å¸ƒ/è®¢é˜…é¢†åŸŸäº‹ä»¶ï¼Œå®ç°æ¾è€¦åˆåä½œã€‚
- è¯»æ¨¡å‹ä¸æŠ•å½±ï¼šå„æœåŠ¡å‡åŒ…å«è¯»æ¨¡å‹æŠ•å½±ï¼Œç”¨äºæŠ¥è¡¨ä¸ä»ªè¡¨æ¿å±•ç¤ºï¼Œé¿å…ç›´æ¥æŸ¥è¯¢å†™æ¨¡å‹ã€‚
- å®æ—¶ä¸æ—¶åºï¼šAnalyticsæœåŠ¡é€šè¿‡SignalRä¸TimescaleDBå®ç°é«˜æ€§èƒ½å®æ—¶ä¸æ—¶é—´åºåˆ—åˆ†æã€‚

```mermaid
graph LR
FIN["Finance"] --> DAPR["Dapr äº‹ä»¶æ€»çº¿"]
INV["Inventory"] --> DAPR
SALES["Sales"] --> DAPR
CRM["CRM"] --> DAPR
PROJ["Projects"] --> DAPR
DAPR --> ANA["Analytics"]
DAPR --> RPT["Reporting"]
ANA --> TSDB["TimescaleDB"]
```

å›¾è¡¨æ¥æº
- [README.md](file://README.md#L177-L182)

ç« èŠ‚æ¥æº
- [README.md](file://README.md#L177-L182)

## æ€§èƒ½è€ƒè™‘
- äº‹ä»¶æº¯æºä¸CQRSï¼šåˆ†ç¦»è¯»å†™æ¨¡å‹ï¼Œé™ä½å¤æ‚æŸ¥è¯¢å¯¹å†™æ¨¡å‹çš„å½±å“ï¼Œæå‡å¹¶å‘æ€§èƒ½ã€‚
- TimescaleDBï¼šé’ˆå¯¹æ—¶é—´åºåˆ—æ•°æ®è¿›è¡Œä¼˜åŒ–ï¼Œæ”¯æŒé«˜æ•ˆèšåˆä¸è¶‹åŠ¿åˆ†æï¼Œé€‚åˆé¢„æµ‹åˆ†æä¸å®æ—¶ä»ªè¡¨æ¿ã€‚
- SignalRï¼šè½»é‡çº§å®æ—¶æ¨é€ï¼Œé€‚ç”¨äºä»ªè¡¨æ¿ä¸ç›‘æ§åœºæ™¯ï¼Œå»ºè®®åˆç†è®¾ç½®å¿ƒè·³ä¸é‡è¿ç­–ç•¥ã€‚
- ç¼“å­˜ä¸åˆ†å¸ƒå¼ç¼“å­˜ï¼šç»“åˆå…±äº«æ„å»ºæ¨¡å—ä¸­çš„ç¼“å­˜æ‰©å±•ï¼Œæå‡çƒ­ç‚¹æ•°æ®è®¿é—®æ€§èƒ½ã€‚

## æ•…éšœæ’é™¤æŒ‡å—
- æœåŠ¡å¯åŠ¨å¤±è´¥
  - æ£€æŸ¥æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²ä¸å®¹å™¨ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®é…ç½®ã€‚
  - ç¡®è®¤äº‹ä»¶æ€»çº¿ï¼ˆDaprï¼‰ä¸ç«¯å£æ˜ å°„æ˜¯å¦æ­£å¸¸ã€‚
- å®æ—¶ä»ªè¡¨æ¿æ— æ•°æ®
  - ç¡®è®¤AnalyticsHubè¿æ¥çŠ¶æ€ä¸äº‹ä»¶æ€»çº¿è®¢é˜…æ˜¯å¦ç”Ÿæ•ˆã€‚
  - æ£€æŸ¥TimescaleDBæ•°æ®å¯¼å…¥ä¸æŠ•å½±æ˜¯å¦æˆåŠŸã€‚
- é¢„æµ‹ç»“æœå¼‚å¸¸
  - æ ¸å¯¹TimescaleDataExtractorçš„æ•°æ®æŠ½å–é€»è¾‘ä¸æ—¶é—´çª—å£ã€‚
  - æ£€æŸ¥DemandForecastEngineçš„è¾“å…¥ç‰¹å¾ä¸æ¨¡å‹å‚æ•°ã€‚
- æŠ¥è¡¨ä¸ºç©º
  - ç¡®è®¤äº‹ä»¶æ€»çº¿äº‹ä»¶æ˜¯å¦åˆ°è¾¾ï¼Œè¯»æ¨¡å‹æŠ•å½±æ˜¯å¦å®Œæˆã€‚
  - æ£€æŸ¥DashboardService/ReportServiceçš„æŸ¥è¯¢æ¡ä»¶ä¸æƒé™ã€‚

## ç»“è®º
æœ¬ä¸“ä¸šä¸šåŠ¡æœåŠ¡ä»¥äº‹ä»¶æº¯æºä¸CQRSä¸ºæ ¸å¿ƒï¼Œç»“åˆDapräº‹ä»¶æ€»çº¿ä¸TimescaleDBï¼Œå®ç°äº†ä»åˆ†ææœåŠ¡çš„å®æ—¶ä»ªè¡¨æ¿ä¸é¢„æµ‹åˆ†æï¼Œåˆ°æŠ¥å‘ŠæœåŠ¡çš„BIä»ªè¡¨æ¿ä¸æŠ¥è¡¨ç”Ÿæˆï¼Œå†åˆ°èµ„äº§ç®¡ç†ã€ç»´æŠ¤ç®¡ç†ã€è–ªèµ„ç®¡ç†ã€é¡¹ç›®ç®¡ç†ä¸CRMç­‰ä¸“ä¸šåŒ–æ¨¡å—çš„å®Œæ•´é—­ç¯ã€‚é€šè¿‡æ¨¡å—åŒ–è®¾è®¡ä¸æ¸…æ™°çš„èŒè´£è¾¹ç•Œï¼Œç³»ç»Ÿå…·å¤‡è‰¯å¥½çš„å¯æ‰©å±•æ€§ä¸å¯ç»´æŠ¤æ€§ï¼Œèƒ½å¤Ÿæ»¡è¶³ä¼ä¸šçº§å¤æ‚ä¸šåŠ¡åœºæ™¯çš„éœ€æ±‚ã€‚

## é™„å½•
- å¿«é€Ÿå¯åŠ¨ä¸éƒ¨ç½²ï¼šå‚è€ƒé¡¹ç›®æ ¹ç›®å½•READMEä¸­çš„å¿«é€Ÿå¯åŠ¨ä¸Kuberneteséƒ¨ç½²æŒ‡å—ï¼Œç¡®ä¿æœ¬åœ°ä¸ç”Ÿäº§ç¯å¢ƒä¸€è‡´ã€‚
- å¥åº·æ£€æŸ¥ï¼šReportingæœåŠ¡æä¾›å¥åº·æ£€æŸ¥ç«¯ç‚¹ï¼Œä¾¿äºå®¹å™¨ç¼–æ’ä¸è¿ç»´ç›‘æ§ã€‚